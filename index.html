<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI Infrastructure Troubleshooting</title>
  <meta name="description" content="Diagnostics-first. Approval-gated remediation. Paste logs/scripts or upload screenshots." />
  <link rel="stylesheet" href="./assets/css/main.css" />
</head>
<body>
  <main class="wrap">
    <header class="top">
      <div class="brand">
        <div class="mark">AI</div>
        <div class="brandText">
          <h1>Infrastructure Troubleshooting</h1>
          <p>Diagnostics-first. Approval-gated remediation. Paste logs/scripts or upload screenshots.</p>
        </div>
      </div>

      <div class="toolbar">
        <div class="mode">
          <span class="pill" id="modePill">Mode: Diagnostics</span>
          <label class="toggle">
            <input type="checkbox" id="approveToggle" />
            <span class="toggleUi"></span>
            <span class="toggleText">Remediation approved</span>
          </label>
        </div>

        <div class="actions">
          <button class="btn secondary" type="button" id="copyTicketBtn">Copy Ticket Notes</button>
          <button class="btn secondary" type="button" id="exportTxtBtn">Export TXT</button>
          <button class="btn secondary" type="button" id="exportJsonBtn">Export JSON</button>
        </div>
      </div>

      <div class="presets" aria-label="Preset prompts">
        <button class="chip" type="button" data-preset="network">Network</button>
        <button class="chip" type="button" data-preset="server">Server</button>
        <button class="chip" type="button" data-preset="script">Script</button>
        <button class="chip" type="button" data-preset="hardware">Hardware</button>
      </div>
    </header>

    <section class="chat" id="chat" aria-label="Chat transcript"></section>

    <form class="composer" id="form">
      <label class="fileBtn">
        <input type="file" id="image" accept="image/*" />
        Attach screenshot
      </label>

      <textarea id="message" class="input" rows="3"
        placeholder="Describe the issue or paste logs/errors/scripts. Use the preset chips for a structured template."
        required></textarea>

      <button class="btn primary" type="submit" id="sendBtn">Send</button>
    </form>

    <footer class="foot">
      <div class="muted">
        Do not paste secrets (keys/passwords). Copy-to-ticket produces ticket-safe notes.
      </div>
    </footer>

    <div class="toast" id="toast" role="status" aria-live="polite"></div>
  </main>

  <script>
    window.BACKEND_URL = "https://imbedded-csrma-ai-agent.onrender.com/api/chat";
  </script>
  <script src="./assets/js/app.js"></script>
</body>
</html>
